============================= test session starts =============================
platform win32 -- Python 3.10.11, pytest-8.4.1, pluggy-1.6.0 -- C:\Users\kcjai\AppData\Local\Programs\Python\Python310\python.exe
cachedir: .pytest_cache
rootdir: D:\Projects\omnichannel-agentic-commerce\backend
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.3.0, cov-6.2.1
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 13 items

tests/unit/test_repositories.py::test_cart_repository_roundtrip_in_memory PASSED
tests/unit/test_repositories.py::test_order_repository_roundtrip_and_idempotency PASSED
tests/unit/test_repositories.py::test_memory_repository_roundtrip_in_memory PASSED
tests/unit/test_repositories.py::test_auth_repository_roundtrip_user_and_refresh PASSED
tests/unit/test_repositories.py::test_interaction_repository_roundtrip_in_memory PASSED
tests/unit/test_repositories.py::test_support_repository_roundtrip_open_tickets PASSED
tests/unit/test_repositories.py::test_session_repository_count_cached PASSED
tests/unit/test_repositories.py::test_session_repository_find_latest_for_user PASSED
tests/unit/test_repositories.py::test_session_repository_cleanup_expired_sessions PASSED
tests/unit/test_repositories.py::test_product_and_inventory_repositories_roundtrip PASSED
tests/unit/test_repositories.py::test_notification_repository_roundtrip_in_memory PASSED
tests/unit/test_repositories.py::test_category_repository_roundtrip_in_memory FAILED
tests/unit/test_repositories.py::test_admin_activity_repository_roundtrip_in_memory PASSED

================================== FAILURES ===================================
________________ test_category_repository_roundtrip_in_memory _________________

    def test_category_repository_roundtrip_in_memory() -> None:
        store = InMemoryStore()
        mongo_manager, redis_manager = _disabled_managers()
        repo = CategoryRepository(
            store=store,
            mongo_manager=mongo_manager,
            redis_manager=redis_manager,
        )
    
        category = {
            "id": "fitness",
            "slug": "fitness",
            "name": "Fitness",
            "description": "Fitness products",
            "status": "active",
            "createdAt": store.iso_now(),
            "updatedAt": store.iso_now(),
        }
        repo.create(category)
    
        by_id = repo.get("fitness")
>       assert by_id is not None
E       assert None is not None

tests\unit\test_repositories.py:579: AssertionError
=========================== short test summary info ===========================
FAILED tests/unit/test_repositories.py::test_category_repository_roundtrip_in_memory
======================== 1 failed, 12 passed in 2.60s =========================
