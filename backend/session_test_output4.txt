============================= test session starts =============================
platform win32 -- Python 3.10.11, pytest-8.4.1, pluggy-1.6.0
rootdir: D:\Projects\omnichannel-agentic-commerce\backend
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.3.0, cov-6.2.1
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 90 items / 85 deselected / 5 selected

tests\unit\test_perf_smoke_script.py .                                   [ 20%]
tests\unit\test_repositories.py ...                                      [ 80%]
tests\unit\test_repository_fallbacks.py F                                [100%]

================================== FAILURES ===================================
_________ test_session_repository_external_fallbacks_delete_and_count _________
tests\unit\test_repository_fallbacks.py:176: in test_session_repository_external_fallbacks_delete_and_count
    assert repo.count() == 0
app\repositories\session_repository.py:116: in count
    return len(list(client.scan_iter(match="session:*")))
E   AttributeError: '_FakeRedisClient' object has no attribute 'scan_iter'
=========================== short test summary info ===========================
FAILED tests/unit/test_repository_fallbacks.py::test_session_repository_external_fallbacks_delete_and_count
================= 1 failed, 4 passed, 85 deselected in 1.39s ==================
